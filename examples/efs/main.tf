# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Create a EFS with mount targets in a VPC
# Notes: Apply ~3-15 minutes  Destroy ~1-10 minutes
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

# ---------------------------------------------------------------------------------------------------------------------
# CONFIGURE OUR AWS CONNECTION
# ---------------------------------------------------------------------------------------------------------------------

provider "aws" {
  # The AWS region in which all resources will be created
  region = "${var.aws_region}"
}

# ---------------------------------------------------------------------------------------------------------------------
# CREATE EFS, Mount Targets and Security Group
# ---------------------------------------------------------------------------------------------------------------------
module "efs" {
  source     = "../../modules/efs"
  name       = "${var.name}"
  kms_key_id = "${var.kms_key_id}"
  vpc_id     = "${var.vpc_id}"
  subnet_ids = "${var.subnet_ids}"
}
